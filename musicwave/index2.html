<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="styles.css">
   <link rel="shortcut icon" href="img/mw..png" type="image/x-icon">
  <title>HOME</title>

</head>
<body>

<!-- cabeçalho -->

  <header>
    <div class="logo-img">
      <img src="img/logomw.png" alt="logo">
    </div>
    <input type="text" placeholder="Navegue..." />
  <button class="bubbles" onclick="pedirCep()">
  <span class="text" id="cep-texto">Informe seu CEP</span>
</button>


            <button class="bubbles" a href="loja.html">
               <span class="text"><a href="loja.html">Loja</a></span>
            </button>

<button class="bubbles" onclick="toggleCarrinho()">
    <span class="text">Carrinho (<span id="cart-count">0</span>)</span>
</button>
      
      <button id="btn-afinador" class="bubbles" onclick="abrirAfinador()">
  <span class="text">Afinador</span>
</button>
  </header>


  <!-- cabeçalho -->


  <!-- sidebar -->

  <aside id="sidebar">
        <a href="perfil.html"><i class="bi bi-person-circle" style="color: black; font-size: 30px"></i></a>
        <a href="index2.html"><i class="bi bi-house-door" style="color: black;font-size: 30px"></i></a>
        <a href="#notificacoes"><i class="bi bi-bell" style="color: black; font-size: 30px"></i></a>
        <a href="#alvaro-coin"><i class="bi bi-coin" style="color: black; font-size: 30px"></i></a>
        <a href="#jogos"><i class="bi bi-controller" style="color: black; font-size: 30px"></i></a>
        <a id="dark-toggle-wrapper" title="Ativar/Desativar modo escuro">
            <label class="container" id="dark-toggle">
                <input type="checkbox" id="darkModeSwitch">
                <svg viewBox="0 0 384 512" class="moon">
                    <path d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"></path>
                </svg>
                <svg viewBox="0 0 512 512" class="sun">
                    <path d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"></path>
                </svg>
            </label>
        </a>
    </aside>

   <!-- sidebar -->

  <main>

    <!-- slideshow -->

    <div class="slideshow-wrapper">
  <div class="slideshow-container">
    <img src="img/1.png" class="slide active" />
    <img src="img/2.png" class="slide" />
    <img src="img/3.png" class="slide" />
    <img src="img/4.png" class="slide" />
    <img src="img/5.png" class="slide" />

    <div class="indicators">
      <span class="dot active" data-index="0"></span>
      <span class="dot" data-index="1"></span>
      <span class="dot" data-index="2"></span>
      <span class="dot" data-index="3"></span>
      <span class="dot" data-index="4"></span>
    </div>
  </div>
</div>
   
  <!-- slideshow -->


    <!-- jogos em destaque -->

     <section class="jogos-destacados"><br>
      <h2><i class="bi bi-controller" style= "font-size: 30px"></i>  CONHEÇA OS JOGOS E GANHE DESCONTO NA SUA COMPRA!</h2> <br><br>
      <div class="cards">
        <div class="card">
          <img src="img/peter.png" alt="">
        </div>
        <div class="card">
          <img src="img/peter.png" alt="">
        </div>
        <div class="card">
          <img src="img/peter.png" alt="">
        </div>
        <div class="card">
          <img src="img/peter.png" alt="">
        </div>
      </div>
    </section>

     <!-- jogos em destaque -->


    <!-- instrumentos em destaque --> 

    <section class="jogos-destacados">
  <h2><i class="bi bi-music-note-beamed" style="font-size: 30px"></i> INSTRUMENTOS EM DESTAQUE</h2>
  <div class="small-container-instrumentos">
    <div class="row-instrumentoss"> 

        <div class="instrumento-card-home">
            <div class="card-image-container-home">
                <img src="instrumentos/guitarra1.png" alt="Guitarra Giannini G102 Elétrica Stratocaster Hh Branco">
            </div>
            <h4>Guitarra Giannini G102 Elétrica Stratocaster</h4>
            <div class="rating">
                <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
            </div>
            <p>R$757,00</p>
        </div>

        <div class="instrumento-card-home">
            <div class="card-image-container-home">
                <img src="instrumentos/celo2.png" alt="Violoncelo Vogga 4/4">
            </div>
            <h4>Violoncelo Vogga 4/4</h4>
            <div class="rating">
                <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
            </div>
            <p>R$2.308,90</p>
        </div>

        <div class="instrumento-card-home">
            <div class="card-image-container-home">
                <img src="instrumentos/bandolim3.png" alt="Bandolim Marquês Bnd-100 Nb Acústico">
            </div>
            <h4>Bandolim Marquês Bnd-100 Nb Acústico</h4>
            <div class="rating">
                <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
            </div>
            <p>R$975,00</p>
        </div>

        <div class="instrumento-card-home">
            <div class="card-image-container-home">
                <img src="instrumentos/viola4.png" alt="Viola De Arco Rolim Milor">
            </div>
            <h4>Viola De Arco Rolim Milor</h4>
            <div class="rating">
                <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
            </div>
            <p>R$2.687,90</p>
        </div>

        <div class="instrumento-card-home">
            <div class="card-image-container-home">
                <img src="instrumentos/banjo5.png" alt="Banjo Americano Wb50 - Strinberg">
            </div>
            <h4>Banjo Americano Wb50 - Strinberg</h4>
            <div class="rating">
                <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
            </div>
            <p>R$1.756,87</p>
        </div>

       <div class="instrumento-card-home">
            <div class="card-image-container-home">
                <img src="instrumentos/violin6.png" alt="Violino Tarttan Série 100 Preto Brilho 4/4">
            </div>
            <h4>Violino Tarttan Série 100 Preto Brilho 4/4</h4>
            <div class="rating">
                <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
            </div>
            <p>R$697,00</p>
        </div>

        <div class="instrumento-card-home">
            <div class="card-image-container-home">
                <img src="instrumentos/charango7.png" alt="Charango Madeira Maciça Abeto Alemão, Jacar, Ébano Luthier">
            </div>
            <h4>Charango Madeira Maciça</h4>
            <div class="rating">
                <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
            </div>
            <p>R$3.480,00</p>
        </div>

        <div class="instrumento-card-home">
            <div class="card-image-container-home">
                <img src="instrumentos/ukulele8.png" alt="Ukulele Azul Claro Seven Concert Suk-23 Lb C/ E Afinador">
            </div>
            <h4>Ukulele Azul Claro Seven Concert Suk-23 Lb</h4>
            <div class="rating">
                <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
            </div>
            <p>R$174,87</p>
        </div>

    </div>
</div>
</section>


<!-- instrumentos em destaque -->        


<!-- seção de apresentar o afinador -->

<div class="afinador">
  <div class="small-container">
    <div class="row">
      <div class="col-2">
        <img src="img/mw_afinador.png" class="afinador-img" alt="Afinador MusicWave">
      </div>
      <div class="col-2">
        <p>Ferramenta exclusiva da MusicWave</p>
        <h1>Afinador On-line</h1>
        <p>Descubra a harmonia perfeita com o afinador online exclusivo da MusicWave! Ele é a ferramenta ideal para garantir que cada instrumento do nosso catálogo — seja um violão, ukulele, baixo ou cavaquinho — soe impecável. Afine seu instrumento de forma rápida e precisa, e mergulhe na música sem preocupações.</p> <br><br>
       
        <a href="#" class="btn-laranja" onclick="abrirAfinador()">Afine seu instrumento agora &#8594;</a>

      </div>
    </div>
  </div>
</div>

<!-- seção de apresentar o afinador -->


<!-- feedbacks -->
 <section class="opinioes">
  <div class="feedbacks">
     <h2><i class="bi bi-chat-dots" style="font-size: 30px"></i> DEIXE SEU FEEDBACK AO MERGULHAR NA MUSICWAVE!</h2><br>
     <section class="feedback-section">
  <form class="feedback-form">
    <label for="comentario">Conte-nos o que achou do nosso E-commerce:</label>
    <textarea id="comentario" name="comentario" rows="4" placeholder="Compartilhe sua experiência..."></textarea>
    <button type="submit">Enviar</button>
  </form>
</section>

    <div class="small-container">
      <div class="row">
        <div class="col-3">
          <i class="bi bi-quote"></i>
          <p>A MusicWave transformou minha experiência musical! O afinador é incrível e os jogos são super divertidos!</p>
          <div class="rating">
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
          </div>
          <img src="img/panqueca.png" alt="sasa">
          <h3>Sabrina Santana</h3>
        </div>

        <div class="col-3">
          <i class="bi bi-quote"></i>
          <p>Adoro a variedade de instrumentos disponíveis. O site é fácil de navegar e sempre encontro o que preciso.</p>
          <div class="rating">
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
          </div>
          <img src="img/panqueca.png" alt="andson">
          <h3>Vinícius Pires</h3>
        </div>

        <div class="col-3">
          <i class="bi bi-quote"></i>
          <p>Os jogos são uma ótima maneira de aprender música enquanto me divirto. Recomendo para todos!</p>
          <div class="rating">
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
            <i class="bi bi-star-fill"></i>
          </div>
          <img src="img/panqueca.png" alt="unnu">
          <h3>Unnu Lívio Panquecudo</h3>
        </div>
      </div>
    </div>
  </div>
</section>
<br>
<!-- feedbacks -->


  </main>


  <!-- botao do darkmode -->

<script>
const switchEl = document.getElementById("darkModeSwitch");

if (localStorage.getItem("darkMode") === "true") {
  document.body.classList.add("dark-mode");
  switchEl.checked = true;
}

switchEl.addEventListener("change", function () {
  document.body.classList.toggle("dark-mode", this.checked);
  localStorage.setItem("darkMode", this.checked);
});
</script>

<!-- botao do darkmode -->



<!-- inserir cep -->

 <script>
  const cepTexto = document.getElementById("cep-texto");

  // Mostra o CEP salvo (caso exista)
  window.addEventListener("DOMContentLoaded", () => {
    const cepSalvo = localStorage.getItem("cepSalvo");
    if (cepSalvo) {
      cepTexto.textContent = "CEP: " + cepSalvo;
    }
  });

  function pedirCep() {
    const cepAtual = localStorage.getItem("cepSalvo") || "";
    const novoCep = prompt(
      "Digite seu CEP:\n\n(Para remover, deixe vazio ou digite 'remover')",
      cepAtual
    );

    if (novoCep === null) return; // cancelou

    if (novoCep.trim() === "" || novoCep.toLowerCase() === "remover" || novoCep.toLowerCase() === "excluir") {
      localStorage.removeItem("cepSalvo");
      cepTexto.textContent = "Informe seu CEP";
      alert("CEP removido.");
      return;
    }  

    const cepFormatado = novoCep.replace(/\D/g, ""); // remove tudo que não for número

    if (/^[0-9]{8}$/.test(cepFormatado)) {
      const cepFinal = cepFormatado.replace(/(\d{5})(\d{3})/, "$1-$2"); // Formata para 12345-678
      localStorage.setItem("cepSalvo", cepFinal);
      cepTexto.textContent = "CEP: " + cepFinal;
    } else {
      alert("CEP inválido. Digite no formato 12345678 ou 12345-678.");
    }
  }
</script>

<!-- inserir cep -->


  <!-- slideshow -->

  <script>
  const slides = document.querySelectorAll(".slide");
  const dots = document.querySelectorAll(".dot");
  const wrapper = document.querySelector(".slideshow-wrapper");

  const bgColors = [
  "#f0e3dc",
  "#ffd7c1",
  "linear-gradient(to right, #374253, #1b2d4a)",
  "#fa98b1",
  "linear-gradient(to right, #e4a777, #f1eae2)"
];


  let index = 0;
  let intervalId;

  function showSlide(i) {
    slides[index].classList.remove("active");
    dots[index].classList.remove("active");
    index = i;
    slides[index].classList.add("active");
    dots[index].classList.add("active");
  wrapper.style.background = bgColors[index];

  }

  function nextSlide() {
    showSlide((index + 1) % slides.length);
  }

  function startAutoSlide() {
    intervalId = setInterval(nextSlide, 3000);
  }

  function resetAutoSlide() {
    clearInterval(intervalId);
    startAutoSlide();
  }

  dots.forEach(dot => {
    dot.addEventListener("click", () => {
      showSlide(parseInt(dot.dataset.index));
      resetAutoSlide();
    });
  });

  startAutoSlide();
</script>
  <!-- slideshow -->

 
     <!-- afinador lateral -->
<div id="afinadorLateral" class="painel-lateral">
  <button onclick="fecharAfinador()">✖</button>
  <h2 style="text-align:center; color:#b45f06;">Afinador</h2>
  <select id="instrumento" onchange="carregarCordas()">
    <option value="violino"> Violino</option>
    <option value="viola"> Viola</option>
    <option value="violoncelo">Violoncelo</option>
    <option value="violao"> Violão</option>
    <option value="guitarra"> Guitarra</option>
    <option value="baixo">Baixo</option>
    <option value="cavaquinho">Cavaquinho</option>
    <option value="ukulele">Ukulele</option>
    <option value="viola_caipira">Viola Caipira</option>
    <option value="banjo"> Banjo</option>
    <option value="charango">Charango</option>
    <option value="bandolim">Bandolim</option>
  </select>
  <p id="descricao"></p>
  <img id="imgInstrumento" class="instrumento-img" src="" alt="Instrumento" style="display:none;" />
  <div class="cordas" id="cordas"></div>
  <button class="btn-todas" onclick="tocarTodasCordas()">Tocar todas as cordas</button>
</div>
<script>
  const afinacoes = {
    violino: [
      { nome: "E - 1ª Corda", freq: 659.25 },
      { nome: "A - 2ª Corda", freq: 440 },
      { nome: "D - 3ª Corda", freq: 293.66 },
      { nome: "G - 4ª Corda", freq: 196 },
    ],
    viola: [
      { nome: "A - 1ª Corda", freq: 880 },
      { nome: "D - 2ª Corda", freq: 587.33 },
      { nome: "G - 3ª Corda", freq: 392 },
      { nome: "C - 4ª Corda", freq: 261.63 },
    ],
    violoncelo: [
      { nome: "A - 1ª Corda", freq: 220 },
      { nome: "D - 2ª Corda", freq: 146.83 },
      { nome: "G - 3ª Corda", freq: 98 },
      { nome: "C - 4ª Corda", freq: 65.41 },
    ],
    violao: [
      { nome: "E - 6ª Corda", freq: 82.41 },
      { nome: "A - 5ª Corda", freq: 110.00 },
      { nome: "D - 4ª Corda", freq: 146.83 },
      { nome: "G - 3ª Corda", freq: 196.00 },
      { nome: "B - 2ª Corda", freq: 246.94 },
      { nome: "E - 1ª Corda", freq: 329.63 },
    ],
    guitarra: [
      { nome: "E - 6ª Corda", freq: 82.41 },
      { nome: "A - 5ª Corda", freq: 110.00 },
      { nome: "D - 4ª Corda", freq: 146.83 },
      { nome: "G - 3ª Corda", freq: 196.00 },
      { nome: "B - 2ª Corda", freq: 246.94 },
      { nome: "E - 1ª Corda", freq: 329.63 },
    ],
    baixo: [
      { nome: "E - 4ª Corda", freq: 41.20 },
      { nome: "A - 3ª Corda", freq: 55.00 },
      { nome: "D - 2ª Corda", freq: 73.42 },
      { nome: "G - 1ª Corda", freq: 98.00 },
    ],
     cavaquinho: [
      { nome: "G - 4ª Corda", freq: 392 },
      { nome: "D - 3ª Corda", freq: 293.66 },
      { nome: "B - 2ª Corda", freq: 246.94 },
      { nome: "D - 1ª Corda", freq: 196 },
    ],
    ukulele: [
      { nome: "G - 4ª Corda", freq: 392 },
      { nome: "C - 3ª Corda", freq: 261.63 },
      { nome: "E - 2ª Corda", freq: 329.63 },
      { nome: "A - 1ª Corda", freq: 440 },
    ],
    viola_caipira: [
      { nome: "E - 1ª Corda", freq: 329.63 },
      { nome: "B - 2ª Corda", freq: 246.94 },
      { nome: "G# - 3ª Corda", freq: 415.30 },
      { nome: "E - 4ª Corda", freq: 329.63 },
      { nome: "B - 5ª Corda", freq: 246.94 },
    ],
    banjo: [
      { nome: "D - 4ª Corda", freq: 293.66 },
      { nome: "B - 3ª Corda", freq: 246.94 },
      { nome: "G - 2ª Corda", freq: 196 },
      { nome: "D - 1ª Corda", freq: 146.83 },
      { nome: "G - 5ª Corda", freq: 392 },
    ],
    charango: [
      { nome: "G - 5ª Corda", freq: 196 },
      { nome: "C - 4ª Corda", freq: 261.63 },
      { nome: "E - 3ª Corda", freq: 329.63 },
      { nome: "A - 2ª Corda", freq: 440 },
      { nome: "E - 1ª Corda", freq: 659.25 },
    ],
    bandolim: [
      { nome: "E - 1ª Corda", freq: 659.25 },
      { nome: "A - 2ª Corda", freq: 440 },
      { nome: "D - 3ª Corda", freq: 293.66 },
      { nome: "G - 4ª Corda", freq: 196 },
    ],
  };


  const descricoes = {
    violino: "Conhecido por sua expressividade e agilidade, o Violino, com suas 4 cordas afinadas em G-D-A-E, é um instrumento de cordas que pode evocar desde as mais delicadas melodias até passagens virtuosísticas.",
    viola: "Com um timbre mais grave e encorpado que o violino, a Viola de Arco, possuindo 4 cordas afinadas uma quinta abaixo do violino (C-G-D-A), atua como uma ponte harmônica, adicionando profundidade e calor.",
    violoncelo: "Dona de uma sonoridade rica e ressonante, que se assemelha à voz humana, o Violoncelo, com suas 4 cordas afinadas em C-G-D-A (uma oitava abaixo da viola), é capaz de tocar linhas melódicas e harmonias profundas com grande emoção.",
     violao: "Essencial em diversos gêneros musicais, o Violão, geralmente com 6 cordas afinadas em E-A-D-G-B-E, é um instrumento versátil que oferece sonoridades ricas e acolhedoras.",
    guitarra: " Seja elétrica ou acústica, a Guitarra, com suas 6 cordas (ou mais) e afinação padrão em E-A-D-G-B-E, é um ícone da música moderna, capaz de produzir desde riffs poderosos a melodias suaves.",
    baixo: "Com suas 4 a 6 cordas e timbre profundo, o Baixo, tipicamente afinado em E-A-D-G, é a espinha dorsal de qualquer banda, fornecendo a base rítmica e harmônica.",
    cavaquinho: "Essencial no samba e no choro, o Cavaquinho, com suas 4 cordas e afinação padrão em D-G-B-D, é um instrumento pequeno, mas com um som vibrante e ágil.",
    ukulele: "Pequeno e alegre, o Ukulele, geralmente com 4 cordas afinadas em G-C-E-A, é perfeito para quem busca um som descontraído e fácil de aprender, ideal para canções leves.",
    viola_caipira: "Parte da alma musical brasileira, a Viola Caipira se destaca por suas 10 cordas em cinco pares e seu timbre único, que evoca a tradição e a emoção do campo.",
    banjo: "Com seu som ressonante e percussivo, o Banjo, frequentemente com 5 cordas e afinação aberta, é a alma do bluegrass e de outros gêneros folclóricos, criando melodias cativantes.",
    charango: "Um instrumento de cordas andino, o Charango, com suas 10 cordas agrupadas em cinco pares, encanta com seu som agudo e vibrante, ideal para melodias folclóricas.",
    bandolim: "Com seu som brilhante e percussivo, o Bandolim, tipicamente com 8 cordas em quatro pares afinados em G-D-A-E, adiciona um toque especial a diversos estilos, do folk ao choro.",
  };


  const imagens = {
    violino: "instrumentos/violin6.png",
    viola: "instrumentos/viola4.png",
    violoncelo: "instrumentos/celo2.png",
    violao: "",
    guitarra: "instrumentos/guitarra1.png",
    baixo: "",
    cavaquinho: "",
    ukulele: "instrumentos/ukulele8.png",
    viola_caipira: "",
    banjo: "instrumentos/banjo5.png",
    charango: "instrumentos/charango7.png",
    bandolim: "instrumentos/bandolim3.png"
  };


  function playNote(freq, el = null) {
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    const ctx = new AudioContext();
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();


    osc.type = "sine";
    osc.frequency.value = freq;


    gain.gain.setValueAtTime(0.2, ctx.currentTime);
    osc.connect(gain);
    gain.connect(ctx.destination);


    osc.start();
    osc.stop(ctx.currentTime + 2);


    if (el) {
      el.classList.add("vibrar");
      setTimeout(() => el.classList.remove("vibrar"), 300);
    }
  }


  function carregarCordas() {
    const tipo = document.getElementById("instrumento").value;
    const cordas = afinacoes[tipo];
    const container = document.getElementById("cordas");
    container.innerHTML = "";
    cordas.forEach(corda => {
      const btn = document.createElement("button");
      btn.textContent = corda.nome;
      btn.onclick = () => playNote(corda.freq, btn);
      container.appendChild(btn);
    });
    document.getElementById("descricao").textContent = descricoes[tipo] || "";
    const img = document.getElementById("imgInstrumento");
    img.src = imagens[tipo] || "";
    img.style.display = imagens[tipo] ? "block" : "none";
  }


  function tocarTodasCordas() {
    const tipo = document.getElementById("instrumento").value;
    const cordas = afinacoes[tipo];
    cordas.forEach((corda, i) => {
      setTimeout(() => playNote(corda.freq), i * 1000);
    });
  }


  function abrirAfinador() {
    document.getElementById("afinadorLateral").classList.add("ativo");
    localStorage.setItem("afinadorAberto", "true");
  }


  function fecharAfinador() {
    document.getElementById("afinadorLateral").classList.remove("ativo");
    localStorage.setItem("afinadorAberto", "false");
  }


  window.addEventListener("DOMContentLoaded", () => {
    carregarCordas();
    if (localStorage.getItem("afinadorAberto") === "true") abrirAfinador();
  });
</script>

 <!-- afinador lateral -->



  <!-- script de paginação dos instrumentos em catálogo -->

  <script>
  //  dados do produto

const products = [
  // violinos 1-8
  {
    id: 1,
    category: "violino",
    title: "Violino Tarttan Série 100 Preto Brilho 4/4",
    price: "R$697,00",
    description: "Este violino Tarttan Série 100, importado da China, é um 4/4 com acabamento preto brilhante. Fabricado com madeira laminada, é ajustado por luthier e vem com estandarte de 4 micro afinadores. Inclui arco, breu e estojo preto.",
    image: "violinos/Violino Tarttan Série 100 Preto Brilho 4/4/violin1-removebg-preview.png",
    thumbnails: [
      "violinos/Violino Tarttan Série 100 Preto Brilho 4/4/violin1-removebg-preview.png",
      "violinos/Violino Tarttan Série 100 Preto Brilho 4/4/violin1-verso.png",
      "violinos/Violino Tarttan Série 100 Preto Brilho 4/4/violin1-case.png"
    ]
  },
  {
    id: 2,
    category: "violino",
    title: "Violino Acústico 4/4",
    price: "R$299,99",
    description: "Este violino acústico 4/4 da marca Mix, na cor marrom, possui corpo em MDF tanto na parte superior quanto na traseira. Suas dimensões são 70 x 30 x 70 cm e vem completo com arco, breu, cavalete e um luxuoso estojo.",
    image: "violinos/2 Violino Acústico 44 Arco Breu Cavalete Mdf Estojo Luxo/violino2.png",
    thumbnails: [
      "violinos/2 Violino Acústico 44 Arco Breu Cavalete Mdf Estojo Luxo/violino2.png",
      "violinos/2 Violino Acústico 44 Arco Breu Cavalete Mdf Estojo Luxo/violino2- pessoas.jpg",
      "violinos/2 Violino Acústico 44 Arco Breu Cavalete Mdf Estojo Luxo/violino2- completo.png"
    ]
  },
  {
    id: 3,
    category: "violino",
    title: "Violino Alan 4/4 Al-1410 Completo",
    price: "R$391,00",
    description: "O Violino Alan AL-1410 é um modelo 4/4 completo na cor Sunburst. Com tampo em Spruce (revestido), traseira e lateral em Maple, cravelhas, queixeira e estandarte em Boxwood, e escala em Maple. Inclui 4 micro afinadores, filetes entalhados, estojo térmico de luxo e arco de crina sintética de 75 cm. Suas dimensões são 60 x 21 x 4 cm.",
    image: "violinos/3 Violino Alan 44 Al-1410 Completo/violino3.png",
    thumbnails: [
      "violinos/3 Violino Alan 44 Al-1410 Completo/violino3.png",
      "violinos/3 Violino Alan 44 Al-1410 Completo/violino3- case.png",
      "violinos/3 Violino Alan 44 Al-1410 Completo/violino3- com case.png"
    ]
  },
  {
    id: 4,
    category: "violino",
    title: "Violino Dominante 9649 3/4",
    price: "R$439,00",
    description: "Este violino acústico Dominante 9649, tamanho 3/4, apresenta acabamento brilhante na cor natural. Não é para canhotos. O corpo é feito de Spruce e o diapasão de Ébano. Acompanha arco e estojo.",
    image: "violinos/4 Violino Dominante 9649 34 Natural Acabamento Brilhante/violino4.png",
    thumbnails: [
      "violinos/4 Violino Dominante 9649 34 Natural Acabamento Brilhante/violino4.png",
      "violinos/4 Violino Dominante 9649 34 Natural Acabamento Brilhante/violino4- dentro da case.png",
      "violinos/4 Violino Dominante 9649 34 Natural Acabamento Brilhante/violino4- detalhes.jpg"
    ]
  },
  {
    id: 5,
    category: "violino",
    title: "Violino Tarttan Série 100 Natural 4/4 com Case",
    price: "R$697,00",
    description: "O Violino Tarttan Série 100 da marca Xenox é um modelo 4/4 natural, com acabamento em verniz. Possui tampo de Ácer e parte traseira em madeira compensada. Acompanha case.",
    image: "violinos/5 Violino Tarttan Série 100 Natural 44 com Case/violino5- com case.png",
    thumbnails: [
      "violinos/5 Violino Tarttan Série 100 Natural 44 com Case/violino5- com case.png",
      "violinos/5 Violino Tarttan Série 100 Natural 44 com Case/violino5- interior.jpg",
      "violinos/5 Violino Tarttan Série 100 Natural 44 com Case/violino5- parte inferior.png"
    ]
  },
  {
    id: 6,
    category: "violino",
    title: "Violino Eagle VE441 Classic Series 4/4",
    price: "R$1.140,00",
    description: "O Violino Eagle VE441 Classic Series da marca TMZUAMOZ é um modelo 4/4 na cor natural. Possui tampo de Abeto. Suas dimensões são 80 x 30 x 20 cm.",
    image: "violinos/6 Violino Eagle VE441 Classic Series 44/violino6.png",
    thumbnails: [
      "violinos/6 Violino Eagle VE441 Classic Series 44/violino6.png",
      "violinos/6 Violino Eagle VE441 Classic Series 44/violino6- dentro da case.png",
      "violinos/6 Violino Eagle VE441 Classic Series 44/violino6- frente e verso.png"
    ]
  },
  {
    id: 7,
    category: "violino",
    title: "Violino Vogga VON144N 4/4",
    price: "R$439,00",
    description: "O Violino Vogga VON144N é um modelo 4/4 na cor Natural Fosco, de origem chinesa. Possui tampo em Spruce. Suas dimensões são 80 x 26 x 11 cm.",
    image: "violinos/7 VIOLINO VOGGA VON144N 44/violino7- completo.png",
    thumbnails: [
      "violinos/7 VIOLINO VOGGA VON144N 44/violino7- completo.png",
      "violinos/7 VIOLINO VOGGA VON144N 44/violino7- frente.png",
      "violinos/7 VIOLINO VOGGA VON144N 44/violino7- verso.png"
    ]
  },
  {
    id: 8,
    category: "violino",
    title: "Violino Vivace Strauss 4/4 Fosco",
    price: "R$1.799,00",
    description: "O Violino Vivace Strauss é um modelo 4/4 com acabamento fosco. Possui tampo de Abeto e parte traseira de madeira de bordo. Acompanha case térmico.",
    image: "violinos/8 Violino Vivace Strauss 44 Fosco Com Case Térmico/violino8.png",
    thumbnails: [
      "violinos/8 Violino Vivace Strauss 44 Fosco Com Case Térmico/violino8.png",
      "violinos/8 Violino Vivace Strauss 44 Fosco Com Case Térmico/violino8- frente.png",
      "violinos/8 Violino Vivace Strauss 44 Fosco Com Case Térmico/violino8- verso.png"
    ]
  },

  // violas 9-16
  {
    id: 9,
    category: "viola",
    title: "Viola De Arco Rolim Milor 40cm Serie Especial ",
    price: "R$2.687,90",
    description: "A Viola de Arco Rolim Milor é um modelo acústico de 40 cm, para destros, com acabamento brilhante e 4 cordas. Inclui como acessórios: arco de crina genuína, breu e estojo.",
    image: "violas/1 Viola De Arco Rolim Milor/viola1- frente e verso.png",
    thumbnails: [
      "violas/1 Viola De Arco Rolim Milor/viola1- frente e verso.png",
      "violas/1 Viola De Arco Rolim Milor/viola1-.png",
      "violas/1 Viola De Arco Rolim Milor/viola1- case.png"
    ]
  },
  {
    id: 10,
    category: "viola",
    title: "Viola Clássica de Arco Alan AL 1310 4/4",
    price: "R$647,00",
    description: "Esta viola clássica de arco Alan, tamanho 4/4, na cor madeira, possui dimensões de 66 x 23 x 4,5 cm. Seu tampo é revestido em Spruce, enquanto a traseira e as laterais são em Maple. Conta com cravelhas, queixeira e estandarte em Boxwood, escala em Maple, e 4 micro afinadores metálicos. Os filetes são entalhados, e o instrumento vem com um luxuoso estojo térmico, arco de crina sintética de 75 cm, breu e cavalete.",
    image: "violas/2 Viola Clássica de Arco AL 1310 44 Alan Com Case Arco Breu Cavalete/viola2.png",
    thumbnails: [
      "violas/2 Viola Clássica de Arco AL 1310 44 Alan Com Case Arco Breu Cavalete/viola2.png",
      "violas/2 Viola Clássica de Arco AL 1310 44 Alan Com Case Arco Breu Cavalete/viola2- completa.png",
      "violas/2 Viola Clássica de Arco AL 1310 44 Alan Com Case Arco Breu Cavalete/viola2- case.png"
    ]
  },
  {
    id: 11,
    category: "viola",
    title: "Viola de Arco Profissional Stradivarius",
    price: "R$5.999,00",
    description: "A Viola de Arco Profissional Stradivarius, da marca 'Viola Chinesa Harmonizada', é um modelo acústico para destros.",
    image: "violas/3 Viola De Arco Profissional STRADIVARIUS/viola3- frente e verso.png",
    thumbnails: [
      "violas/3 Viola De Arco Profissional STRADIVARIUS/viola3- frente e verso.png",
      "violas/3 Viola De Arco Profissional STRADIVARIUS/viola3- cavalete.jpg",
      "violas/3 Viola De Arco Profissional STRADIVARIUS/viola3.png"
    ]
  },
  {
    id: 12,
    category: "viola",
    title: "Viola de Arco 4/4 VA150 Envernizado EAGLE",
    price: "R$1.279,00",
    description: "A Viola de Arco Eagle VA150 é um modelo 4/4 com dimensões de 13 x 31 x 86 cm. Possui tampo em Maple e parte traseira em Ébano e Maple, com acabamento envernizado.",
    image: "violas/4 Viola de Arco 44 VA150 Envernizado EAGLE/viola4- frente.png",
    thumbnails: [
      "violas/4 Viola de Arco 44 VA150 Envernizado EAGLE/viola4- frente.png",
      "violas/4 Viola de Arco 44 VA150 Envernizado EAGLE/viola4- verso.png",
      "violas/4 Viola de Arco 44 VA150 Envernizado EAGLE/viola4- dentro da case.png"
    ]
  },
  {
    id: 13,
    category: "viola",
    title: "Viola Clássica Envelhecida Alan AL 1310 3/4 E",
    price: "R$660,00",
    description: "A Viola Clássica Envelhecida Alan AL 1310 3/4 E possui acabamento marrom fosco envelhecido. Com dimensões de 88 x 36 x 16 cm, seu tampo é feito de Plywood e as cordas são de aço inoxidável.",
    image: "violas/5 Viola Clássica Envelhecida AL 1310 34 E Alan/viola5- completa.png",
    thumbnails: [
      "violas/5 Viola Clássica Envelhecida AL 1310 34 E Alan/viola5- completa.png",
      "violas/5 Viola Clássica Envelhecida AL 1310 34 E Alan/viola5- verso.png",
      "violas/5 Viola Clássica Envelhecida AL 1310 34 E Alan/viola5- inclinada.png"
    ]
  },
  {
    id: 14,
    category: "viola",
    title: "Viola Antoni Marsale Série YA320 40,5cm 16",
    price: "R$2.297,00",
    description: "A Viola Antoni Marsale série YA320, de 40,5 cm (16 polegadas), é feita de madeiras maciças (Acero e Abeto) e possui 4 cordas. É ajustada por luthier, vem com estandarte com micro afinador na corda Lá, e acompanha breu, estojo e arco.",
    image: "violas/6 Viola Antoni Marsale série YA320/viola6- frente e verso.png",
    thumbnails: [
      "violas/6 Viola Antoni Marsale série YA320/viola6- frente e verso.png",
      "violas/6 Viola Antoni Marsale série YA320/viola6- voluta e cravelhas.png",
      "violas/6 Viola Antoni Marsale série YA320/viola6- dentro da case.png"
    ]
  },
  {
    id: 15,
    category: "viola",
    title: "Viola Antoni Marsale Série YA400 Stradivari 42 cm 16,5 Gold",
    price: "R$2.997,00",
    description: "A Viola Antoni Marsale série YA400 Stradivari, de 42 cm (16,5 polegadas), é um instrumento indicado para violistas intermediários e avançados. Seu tampo é feito de Abeto, e o fundo e laterais em Acero de excelente seleção com marezzatura média. Os acessórios e o espelho são de Ébano. Acompanha case retangular e um lindo arco octogonal.",
    image: "violas/7 Viola Antoni Marsale série YA400 Stradivari 42 cm/viola7- frente e verso.png",
    thumbnails: [
      "violas/7 Viola Antoni Marsale série YA400 Stradivari 42 cm/viola7- frente e verso.png",
      "violas/7 Viola Antoni Marsale série YA400 Stradivari 42 cm/viola7- case.png",
      "violas/7 Viola Antoni Marsale série YA400 Stradivari 42 cm/viola7- superior.png"
    ]
  },
  {
    id: 16,
    category: "viola",
    title: "Viola de Arco Antoni Marsale Série YA110 40,5cm 16",
    price: "R$1.397,00",
    description: "A Viola de Arco Antoni Marsale Série YA110, de 40,5 cm (16 polegadas), na cor laranja-claro, é um modelo acústico Stradivari para destros. Possui 4 cordas e acabamento brilhante.",
    image: "violas/8 Viola De Arco Antoni Marsale Série Ya110/viola8- frente e verso.png",
    thumbnails: [
      "violas/8 Viola De Arco Antoni Marsale Série Ya110/viola8- frente e verso.png",
      "violas//8 Viola De Arco Antoni Marsale Série Ya110/viola8- voluta e cravelhas.png",
      "violas/8 Viola De Arco Antoni Marsale Série Ya110/viola8- case.png"
    ]
  },

  // violoncelos 17-24
  {
    id: 17,
    category: "violoncelo",
    title: "Violoncelo AL 1210 44 Alan Com Capa Arco Breu",
    price: "R$1.500,00",
    description: "Este violoncelo Alan AL 1210 4/4, na cor marrom avermelhada, mede 123 x 46 x 14 cm. Possui tampo laminado em Spruce, traseira e laterais em Linden, e acabamento em verniz sintético. Conta com cravelhas em Maple, estandarte em Boxwood, 4 micro afinadores metálicos e filetes entalhados. Acompanha arco de crina sintética de 72 cm, capa e breu.",
    image: "violoncelos/1 Violoncelo AL 1210 44 Alan Com Capa Arco Breu/violoncelo1.png",
    thumbnails: [
      "violoncelos/1 Violoncelo AL 1210 44 Alan Com Capa Arco Breu/violoncelo1.png",
      "violoncelos/1 Violoncelo AL 1210 44 Alan Com Capa Arco Breu/violoncelo1- verso.png",
      "violoncelos/1 Violoncelo AL 1210 44 Alan Com Capa Arco Breu/violoncelo1- com case.png"
    ]
  },
  {
    id: 18,
    category: "violoncelo",
    title: "Alan, Violoncelo Envelhecido AL 1210 44 E Alan Com Capa Arco Breu",
    price: "R$1.836,10",
    description: "O Violoncelo Envelhecido Alan AL 1210 4/4 E apresenta um acabamento marrom fosco envelhecido. Suas dimensões aproximadas são 133 x 51 x 33 cm, com tampo em Plywood. Acompanha capa, arco e breu.",
    image: "violoncelos/2 Alan, Violoncelo Envelhecido AL 1210 44 E Alan Com Capa Arco Breu/violoncelo2.png",
    thumbnails: [
      "violoncelos/2 Alan, Violoncelo Envelhecido AL 1210 44 E Alan Com Capa Arco Breu/violoncelo2.png",
      "violoncelos/2 Alan, Violoncelo Envelhecido AL 1210 44 E Alan Com Capa Arco Breu/violoncelo2- verso.png",
      "violoncelos/2 Alan, Violoncelo Envelhecido AL 1210 44 E Alan Com Capa Arco Breu/violoncelo2- com case.png"
    ]
  },
  {
    id: 19,
    category: "violoncelo",
    title: "VIOLONCELO VOGGA VOC144N 44",
    price: "R$2.308,90",
    description: "O Violoncelo Vogga VOC144N é um modelo 4/4 na cor Natural Fosco. Suas dimensões são 140 x 33 x 52 cm e possui tampo em Abeto.",
    image: "violoncelos/3 VIOLONCELO VOGGA VOC144N 44/violoncelo3.png",
    thumbnails: [
      "violoncelos/3 VIOLONCELO VOGGA VOC144N 44/violoncelo3.png",
      "violoncelos/3 VIOLONCELO VOGGA VOC144N 44/violoncelo3- verso.png",
      "violoncelos/3 VIOLONCELO VOGGA VOC144N 44/violoncelo3- case.png"
    ]
  },
  {
    id: 20,
    category: "violoncelo",
    title: "Violoncelo Vivace 44 Cmo44 Mozart Cello Violoncello",
    price: "R$1.900,00",
    description: "O Violoncelo Vivace CMO44 Mozart, tamanho 4/4, na cor natural, possui acabamento brilhante. Com dimensões de 14 x 24 x 68 cm, seu tampo é em Spruce Plywood, corpo em Maple Plywood, espelho e cravelhas em Hardwood, e braço em Maple. O estandarte é de Hardwood. Acompanha BAG, arco de Rosewood com crina animal e breu.",
    image: "violoncelos//4 Violoncelo Vivace 44 Cmo44 Mozart Cello Violoncello/violoncelo4.png",
    thumbnails: [
      "violoncelos//4 Violoncelo Vivace 44 Cmo44 Mozart Cello Violoncello/violoncelo4.png",
      "violoncelos//4 Violoncelo Vivace 44 Cmo44 Mozart Cello Violoncello/violoncelo4- cravelhas.png",
      "violoncelos//4 Violoncelo Vivace 44 Cmo44 Mozart Cello Violoncello/violoncelo4- parte superior.png"
    ]
  },
  {
    id: 21,
    category: "violoncelo",
    title: "Violoncelo Cello Dasons Acabamento Brilho",
    price: "R$1.744,95",
    description: "O Violoncelo Dasons CP105H está disponível nos tamanhos 3/4 e 4/4, com acabamento brilho. Possui corpo em Plywood, caixa das cravelhas e braço em Hardwood. Inclui arco, resina e afinadores finos, mas não acompanha estojo.",
    image: "violoncelos/5 Violoncelo Cello Dasons Acabamento Brilho/violoncelo5.png",
    thumbnails: [
      "violoncelos/5 Violoncelo Cello Dasons Acabamento Brilho/violoncelo5.png",
      "violoncelos/5 Violoncelo Cello Dasons Acabamento Brilho/violoncelo5- aaaa.png",
    ]
  },
  {
    id: 22,
    category: "violoncelo",
    title: "Violoncelo Tarttan Série 100 Preto 4/4",
    price: "R$2.297,00",
    description: "O Violoncelo Tarttan Série 100 é um modelo 4/4 na cor preta. Possui corpo em Plywood, caixa das cravelhas e braço em Ébano. Inclui estojo, arco e afinadores finos, mas não vem com resina.",
    image: "violoncelos/6 Violoncelo Tarttan Série 100 Preto 44/violoncelo6.png",
    thumbnails: [
      "violoncelos/6 Violoncelo Tarttan Série 100 Preto 44/violoncelo6.png",
      "violoncelos/6 Violoncelo Tarttan Série 100 Preto 44/violoncelo6- cravelhas.png",
      "violoncelos/6 Violoncelo Tarttan Série 100 Preto 44/violoncelo6- microafinadores.png",
    ]
  },
  {
    id: 23,
    category: "violoncelo",
    title: "Violoncelo Dasons Com Com Arco Capa E Breu",
    price: "R$1.738,45",
    description: "Este Violoncelo Dasons modelo CG001L possui corpo feito de Hardwood. Ele vem completo com arco, capa e breu.",
    image: "violoncelos/7 Violoncelo Dasons Com Com Arco Capa E Breu/violoncelo7.png",
    thumbnails: [
      "violoncelos/7 Violoncelo Dasons Com Com Arco Capa E Breu/violoncelo7.png",
      "violoncelos/7 Violoncelo Dasons Com Com Arco Capa E Breu/violoncelo7- verso.png",
      "violoncelos/7 Violoncelo Dasons Com Com Arco Capa E Breu/violoncelo7- case.png"
    ]
  },
  {
    id: 24,
    category: "violoncelo",
    title: "Violoncelo Michael VOM40 4/4 Tradicional",
    price: "R$3.394,70",
    description: "O Violoncelo Michael VOM40 é um modelo 4/4 completo com acabamento tradicional. É ideal para músicos avançados.",
    image: "violoncelos/8 Violoncelo Michael VOM40 44 Tradicional/violoncelo.png",
    thumbnails: [
      "violoncelos/8 Violoncelo Michael VOM40 44 Tradicional/violoncelo.png",
      "violoncelos/8 Violoncelo Michael VOM40 44 Tradicional/violoncelo8- cravelhas.png",
      "violoncelos/8 Violoncelo Michael VOM40 44 Tradicional/violoncelo8- case.png"
    ]
  }
];

let carrinho = [];

// para os demais produtos (25 a 96) simbólicos
for (let i = 25; i <= 96; i++) {
  products.push({
    id: i,
    category: "outro",
    title: `Produto aleatório aí #${i}`,
    price: "R$000,00",
    description: "blá blá blá",
    image: "placeholder.png", // imagem genérica substitua como quiser
    thumbnails: ["placeholder.png"]
  });
}

// paginação e renderização

const productsPerPage = 8;
let currentPage = 1;

const productListEl = document.getElementById("product-list");
const paginationEl = document.getElementById("pagination");

function renderProducts(page) {
  productListEl.innerHTML = "";

  const start = (page - 1) * productsPerPage;
  const end = start + productsPerPage;
  const paginatedProducts = products.slice(start, end);

  paginatedProducts.forEach(product => {
    const card = document.createElement("div");
    card.className = "instrumento-card";

    //   a tag <img> foi envolvida com a nova div <div class="card-image-container"> 

    card.innerHTML = `
      <div class="card-image-container">
        <img src="${product.image}" alt="${product.title}">
      </div>
      <h4>${product.title}</h4>
      <div class="rating">
        <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
      </div>
      <p>${product.price}</p>
      <button class="ver-detalhes-btn" data-id="${product.id}">Ver detalhes</button>
    `;

    productListEl.appendChild(card);
  });

  setupDetailButtons();
}

function renderPagination() {
  paginationEl.innerHTML = "";

  const pageCount = Math.ceil(products.length / productsPerPage);

  // botão "anterior"
  const prevBtn = document.createElement("span");
  prevBtn.textContent = "«";
  prevBtn.className = "prev-btn";
  prevBtn.style.cursor = currentPage === 1 ? "not-allowed" : "pointer";
  prevBtn.style.color = currentPage === 1 ? "#aaa" : "#f7bd6d";
  prevBtn.addEventListener("click", () => {
    if (currentPage > 1) {
      currentPage--;
      update();
    }
  });
  paginationEl.appendChild(prevBtn);

  // para paginar com botões numéricos simplificados (1,2,3...n)


  // exibição de botões de página 
  for (let i = 1; i <= pageCount; i++) {
    const pageBtn = document.createElement("span");
    pageBtn.textContent = i;
    pageBtn.className = i === currentPage ? "active" : "";
    pageBtn.addEventListener("click", () => {
      if (i !== currentPage) {
        currentPage = i;
        update();
      }
    });
    paginationEl.appendChild(pageBtn);
  }

  // botão "Próximo"
  const nextBtn = document.createElement("span");
  nextBtn.textContent = "»";
  nextBtn.className = "next-btn";
  nextBtn.style.cursor = currentPage === pageCount ? "not-allowed" : "pointer";
  nextBtn.style.color = currentPage === pageCount ? "#aaa" : "#f7bd6d";
  nextBtn.addEventListener("click", () => {
    if (currentPage < pageCount) {
      currentPage++;
      update();
    }
  });
  paginationEl.appendChild(nextBtn);
}

function update() {
  renderProducts(currentPage);
  renderPagination();
}

// modal de detalhes do produto

const modal = document.getElementById("modal");
const modalClose = document.getElementById("modal-close");
const modalMainImage = document.getElementById("modal-main-image");
const modalThumbnails = document.getElementById("modal-thumbnails");
const modalTitle = document.getElementById("modal-title");
const modalPrice = document.getElementById("modal-price");
const modalDescription = document.getElementById("modal-description");
const quantityInput = document.getElementById("quantity");
const paymentMethodSelect = document.getElementById("payment-method");
const buyBtn = document.getElementById("buy-btn");

let currentModalProduct = null;

function setupDetailButtons() {
  const buttons = document.querySelectorAll(".ver-detalhes-btn");
  buttons.forEach(btn => {
    btn.onclick = () => {
      const id = parseInt(btn.getAttribute("data-id"));
      openModal(id);
    };
  });
}

function openModal(id) {
  currentModalProduct = products.find(p => p.id === id);
  if (!currentModalProduct) return;

  modalTitle.textContent = currentModalProduct.title;
  modalPrice.textContent = currentModalProduct.price;
  modalDescription.textContent = currentModalProduct.description;
  quantityInput.value = 1;
  paymentMethodSelect.value = "";

  // imagem principal do instrumento
  modalMainImage.src = currentModalProduct.image;
  modalMainImage.alt = currentModalProduct.title;

  // thumbnails
  modalThumbnails.innerHTML = "";
  currentModalProduct.thumbnails.forEach((thumb, index) => {
    const img = document.createElement("img");
    img.src = thumb;
    img.alt = currentModalProduct.title + " - imagem " + (index + 1);
    if(index === 0) img.classList.add("active");

    img.onclick = () => {
      document.querySelectorAll("#modal-thumbnails img").forEach(im => im.classList.remove("active"));
      img.classList.add("active");
      modalMainImage.src = thumb;
    };

    modalThumbnails.appendChild(img);
  });

  modal.classList.add("active");
}

modalClose.onclick = () => {
  modal.classList.remove("active");
};

modal.onclick = (e) => {
  if(e.target === modal){
    modal.classList.remove("active");
  }
};

buyBtn.onclick = () => {
    // validação do formulário (já existente)
    if (!paymentMethodSelect.value) {
        alert("Por favor, selecione a forma de pagamento.");
        paymentMethodSelect.focus();
        return;
    }
    const quantity = parseInt(quantityInput.value);
    if (quantity < 1 || isNaN(quantity)) {
        alert("Quantidade inválida.");
        quantityInput.focus();
        return;
    }

    // adiciona o produto ao carrinho
    adicionarAoCarrinho(currentModalProduct, quantity);
    
    // fecha o modal após adicionar ao carrinho
    modal.classList.remove("active"); 
};

// funções do carrinho de compras
function toggleCarrinho() {
    document.getElementById('carrinho').classList.toggle('ativo');
}

function adicionarAoCarrinho(produto, quantidade) {
    // adiciona o produto ao carrinho a quantidade de vezes especificada
    for (let i = 0; i < quantidade; i++) {
        carrinho.push(produto);
    }
    atualizarCarrinho();
    alert(`${quantidade}x "${produto.title}" adicionado(s) ao carrinho!`);
}

function removerDoCarrinho(index) {
    carrinho.splice(index, 1); // remove o item pelo seu índice no array
    atualizarCarrinho();
}

function atualizarCarrinho() {
    const cartCountEl = document.getElementById('cart-count');
    const listaCarrinhoEl = document.getElementById('lista-carrinho');
    const totalCarrinhoEl = document.getElementById('total-carrinho');
    
    cartCountEl.innerText = carrinho.length; // atualiza o contador no header

    if (carrinho.length === 0) {
        listaCarrinhoEl.innerHTML = '<li class="carrinho-vazio">Seu carrinho está vazio.</li>';
        totalCarrinhoEl.innerText = '0,00';
        return;
    }

    listaCarrinhoEl.innerHTML = ''; // limpa a lista antes de recriar

    let total = 0;
    carrinho.forEach((item, index) => {
        // converte o preço de string "R$1.799,00" para número 1799.00
        const precoNumerico = parseFloat(item.price.replace('R$', '').replace('.', '').replace(',', '.'));
        total += precoNumerico;

        const li = document.createElement('li');
        li.className = 'carrinho-item';
        li.innerHTML = `
            <img src="${item.image}" alt="${item.title}">
            <div class="carrinho-item-info">
                <h4>${item.title}</h4>
                <p>${item.price}</p>
                <button class="remover-item-btn" onclick="removerDoCarrinho(${index})">Remover</button>
            </div>
        `;
        listaCarrinhoEl.appendChild(li);
    });

    totalCarrinhoEl.innerText = total.toFixed(2).replace('.', ',');
}

function finalizarCompra() {
    if (carrinho.length === 0) {
        alert("Seu carrinho está vazio!");
        return;
    }

    const total = carrinho.reduce((acc, item) => {
        const preco = parseFloat(item.price.replace('R$', '').replace('.', '').replace(',', '.'));
        return acc + preco;
    }, 0);

    alert(`Compra finalizada!\nTotal de itens: ${carrinho.length}\nValor total: R$ ${total.toFixed(2).replace('.', ',')}\n\nObrigado por comprar na MusicWave!`);

    carrinho = []; // esvazia o carrinho
    atualizarCarrinho(); // atualiza a exibição
    toggleCarrinho(); // fecha o painel do carrinho
}

// inicialização

update();



</script>
  </script>

   <!-- script de paginação dos instrumentos em catálogo -->



   <!-- carrinho -->

   <div id="carrinho" class="carrinho-lateral">
    <div class="carrinho-header">
        <h2> Seu carrinho</h2>
        <button class="carrinho-fechar" onclick="toggleCarrinho()">&times;</button>
    </div>
    <ul id="lista-carrinho" class="carrinho-body">
        <li class="carrinho-vazio">Seu carrinho está vazio.</li>
    </ul>
    <div class="carrinho-footer">
        <p><strong>Total:</strong> R$ <span id="total-carrinho">0,00</span></p>
        <button class="finalizar-compra-btn" onclick="finalizarCompra()">Finalizar Compra</button>
    </div>
</div>
   <!-- carrinho -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const searchInput = document.getElementById('search-input');
        if (searchInput) {
            searchInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    const query = searchInput.value.trim();
                    if (query) {
                        window.location.href = `kkk.html?pesquisa=${encodeURIComponent(query)}`;
                    } else {
                        // Se a busca estiver vazia, redireciona para o catálogo sem filtro
                        window.location.href = `kkk.html`;
                    }
                }
            });
        }
    });

    </script>


  <footer>
        <span class="footer-title">MusicWave</span>
        <ul class="socials">
            <li><a href="#"><i class="bi bi-whatsapp"></i></a></li>
            <li><a href=""><i class="bi bi-envelope-fill"></i></a></li>
            <li><a href="#"><i class="bi bi-linkedin"></i></a></li>
            <li><a href="https://www.instagram.com/elliscarv/"><i class="bi bi-instagram"></i></a></li>
        </ul>
        <div class="info">
            <ul>
                <li class="footer-list_header">Oferece</li>
                <li><a href="#">Produtos</a></li>
                <li><a href="#">Serviços</a></li>
                <li><a href="#">Categorias</a></li>
                <li><a href="#">Contato</a></li>
            </ul>

            <ul>
                <li class="footer-list_header">Documentos</li>
                <li><a href="#">Sobre</a></li>
                <li><a href="#">Políticas de Privacidade</a></li>
                <li><a href="#">Termos de Serviço</a></li>
                <li><a href="#">Cookies</a></li>
            </ul>

            <ul>
                <li class="footer-list_header">Para você</li>
                <li><a href="#">Manuais</a></li>
                <li><a href="#">Tutoriais</a></li>
                <li><a href="#">Dicas e Truques</a></li>
                <li><a href="#">F&Q</a></li>
            </ul>

            <ul>
                <li class="footer-list_header">Trabalhe conosco</li>
                <li><a href="#">Afiliar</a></li>
                <li><a href="#">Colaborações</a></li>
                <li><a href="#">Patrocinadores</a></li>
                <li><a href="#">Parcerias</a></li>
            </ul>
        </div>
        <p>Copyright &copy; 2025 MusicWave. Todos os direitos reservados. </p>
    </footer>

</body>
</html>
    


